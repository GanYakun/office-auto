<ofbiz-edm xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://dev.odatalab.com/dtds/edmconfig.xsd" ImportGlobal="false">

    <!-- 返回用户自选参数 -->
    <ComplexType Name="ApproverData">
        <Property Name="nodeId" Type="Edm.Decimal"/>
        <Property Name="nodeName" Type="String"/>
        <Property Name="selectList" Type="String"/>
    </ComplexType>
    <!-- 用户返回当前正在进行的节点 -->
    <ComplexType Name="ActiveData">
        <Property Name="processId" Type="String"/>
        <Property Name="nodeId" Type="Edm.Decimal"/>
    </ComplexType>
    <EntityType Name="SupplierParty" OfbizType="PartyRole/roleTypeId=SUPPLIER" EntityCondition="approvePartyId=${company.partyId}" OfbizEntity="WorkEffortAndPartyGroupContact" EntitySetName="SupplierParties" AutoSet="true" AutoProperties="true" AttrDateEntityName="PartyAttributeDate"
                DraftEntityName="PartySupplierPartyDraft" AutoLabel="true" SearchOption="partyName,primaryEmail,address1"
                Handler="component://officeauto/groovyScripts/partyManage/supplierParty/generateEntityListFields.groovy">
        <LineItem>
            <DataField Values="partyId,currentStatusId,primaryEmail,address1,primaryPhone" Importance="High"/>
        </LineItem>
        <Property Name="partyId">
            <Text Path="partyName" TextArrangement="TextFirst"/>
        </Property>
        <Property Name="currentStatusId" DefaultValue="NOT_PROCESSED"/>
        <Property Name="createSupplierHidden" Type="Boolean" Hidden="true"/>
        <Property Name="firstOrderDate" Type="Timestamp" IsDateAttribute="true"/>
        <Property Name="collectionDate" Type="Timestamp" IsDateAttribute="true"/>
        <Property Name="totalAmount" Type="BigDecimal" Label="订单总金额" Scale="3"/>
        <Property Name="criticalityValue" Type="numeric" Hidden="true" HiddenFilter="true"/>
        <Property Name="statusId" Immutable="true" DefaultValue="APPROVAL_CREATED">
            <ValueList CollectionPath="SupplierStatusItems" WithFixedValues="true"/>
        </Property>
        <Property Name="usccNumber" Type="String" HiddenFilter="true"/>
        <RelAlias Name="PersonAndContact" Relations="FromPartyRelationship(roleTypeIdTo=CONTACT and roleTypeIdFrom=SUPPLIER)/ToPersonAndContact"/>
        <Property Name="contactName" RelAlias="PersonAndContact" Field="partyName" Computed="true"/>
        <Property Name="contactPhoneMobile" RelAlias="PersonAndContact" Field="phoneMobile" Computed="true"/>
        <Property Name="contactPhonePrimary" RelAlias="PersonAndContact" Field="primaryPhone" Computed="true"/>
        <Property Name="contactEmailPrimary" RelAlias="PersonAndContact" Field="primaryEmail" Computed="true"/>

        <NavigationProperty Name="SupplierProduct"/>
        <NavigationProperty Name="ToShipment"/>
        <NavigationProperty Name="FromShipment"/>
        <NavigationProperty Name="SupplierStatusItem" Type="SupplierStatusItem" Relations="StatusItem"/>
        <NavigationProperty Name="OwnerFinAccount" Type="FinAccount" IsCollection="true"
                            Relations="OwnerFinAccount(finAccountTypeId=BANK_ACCOUNT)" />
        <NavigationProperty Name="PersonAndContact" Relations="FromPartyRelationship(roleTypeIdTo=CONTACT and roleTypeIdFrom=SUPPLIER)/ToPersonAndContact" Type="PersonAndContact" IsCollection="true"/>
        <NavigationProperty Name="PurchaseAgreement" Type="PurchaseAgreement" Relations="ToAgreement"/>
        <NavigationProperty Name="NoteData" Type="NoteData" Relations="PartyNote/NoteData" IsCollection="true"/>
        <NavigationProperty Name="PurchaseOrder" Type="PurchaseOrder" Relations="OrderRole(roleTypeId=BILL_FROM_VENDOR)/OrderHeader" IsCollection="true"/>
        <NavigationProperty Name="Invoice"/>
        <NavigationProperty Name="PurchaseQuote" Type="PurchaseQuote" Relations="Quote" IsCollection="true"/>
        <NavigationProperty Name="AfterSalesService" Type="AfterSalesService" Relations="WorkEffortPartyAssignment(roleTypeId=SUPPLIER)/WorkEffort" IsCollection="true"/>
        <NavigationProperty Name="PartyClassification" IsCollection="false"/>
        <NavigationProperty Name="SurveyQuestionAppl" Type="SurveyQuestionAppl" Relations="PartySurveyAppl/SurveyQuestionAppl" IsCollection="true"/>
        <NavigationProperty Name="ChildWorkEffortAndPartyGroupContact" Type="CoWorkHistory" Relations="ChildWorkEffortAndPartyGroupContact" IsCollection="true"/>
        <SelectionFields PropertyPath="statusId,primaryPhone"/>

<!--        <FieldGroup Qualifier="PartyGroupFieldGroup" Label="PartyGroupFieldGroup">-->
<!--            <DataField Values="numEmployees,annualRevenue,tickerSymbol,comments" Importance="High"/>-->
<!--        </FieldGroup>-->

        <FieldGroup Qualifier="TimeInfo" Label="TimeInfo">
            <DataField Values="createdDate,lastModifiedDate,firstOrderDate,collectionDate" Importance="High"/>
        </FieldGroup>

        <Function Name="GetApproverData_Supplier" OfbizService="com.banfftech.event.ApprovalEvent.getApproverData"
                  IsBound="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <ReturnType Type="ApproverData" IsCollection="true"/>
        </Function>
        <Action Name="SubmitApproval_Supplier" IsBound="true" OfbizService="com.banfftech.event.ApprovalEvent.submitApproval">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="approverData" Type="String" Nullable="true" IsCollection="false"/>
        </Action>
        <Action Name="CancelApproval_Supplier" IsBound="true" OfbizService="com.banfftech.event.ApprovalEvent.cancelApproval">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
        </Action>
        <Action Name="ViewApproval_Supplier" IsBound="true" OfbizService="com.banfftech.event.ApprovalEvent.viewApproval">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <ReturnType Type="ActiveData" Nullable="true"/>
        </Action>

        <FieldGroup Qualifier="IdentificationCode" Label="IdentificationCode">
            <DataField Values="usccNumber" Importance="High"/>
        </FieldGroup>

        <HeaderInfo TypeName="供应商" TypeNamePlural="供应商列表">
            <Title Path="partyId"/>
            <Description Path="description"/>
        </HeaderInfo>

        <Action Name="FillSupplierBaseInfo" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.bfdemo.events.ShipmentEvents.fillSupplierBaseInfo"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="numEmployees" Type="String"/>
            <Parameter Name="annualRevenue" Type="String"/>
            <Parameter Name="tickerSymbol" Type="String"/>
            <Parameter Name="comments" Type="String"/>
            <ReturnType Type="SupplierParty"/>
        </Action>

        <Action Name="UpdateSupplierContactInfo" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.bfdemo.events.ShipmentEvents.fillSupplierBaseInfo"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="primaryPhone" Type="String"/>
            <Parameter Name="primaryEmail" Type="String"/>
            <Parameter Name="address1" Type="String"/>
            <ReturnType Type="SupplierParty"/>
        </Action>

        <Action Name="UpdateSupplierTimeInfo" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.bfdemo.events.ShipmentEvents.fillSupplierBaseInfo"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="collectionDate" Type="Timestamp"/>
            <Parameter Name="firstOrderDate" Type="Timestamp"/>
            <ReturnType Type="SupplierParty"/>
        </Action>

        <Action Name="CreateSupplierParty" IsBound="true" OfbizService="com.dpbird.odata.events.ActionEvents.createEntity">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="true"/>
            <Parameter Name="partyName" Type="String" Label="供应商名称" Nullable="false"/>
            <Parameter Name="primaryPhone" Type="String" Label="电话" Nullable="true"/>
            <Parameter Name="address1" Type="String" Label="地址" Nullable="false"/>
            <Parameter Name="primaryEmail" Type="String" Label="邮箱" Nullable="true"/>
            <ReturnType Type="SupplierParty"/>
        </Action>

        <!--推送给采购部门的Action-->
        <Action Name="SubmitToProcurement" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.events.SupplierApproveEvents.toProcurement"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="target" Type="String" IsCollection="false"/>
            <Parameter Name="noteInfo" Type="String" Label="${noteInfo}"/>
            <ReturnType Type="SupplierParty"/>
        </Action>
        <!--推送到申请人的Action-->
        <Action Name="ReturnToApplication" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.events.SupplierApproveEvents.procurementReturn"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="target" Type="String" IsCollection="false"/>
            <Parameter Name="noteInfo" Type="String" Label="${noteInfo}"/>
            <ReturnType Type="SupplierParty"/>
        </Action>
        <!--推送到供应商的Action-->
        <Action Name="ReturnToSupplier" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.events.SupplierApproveEvents.procurementReturn"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="target" Type="String" IsCollection="false"/>
            <Parameter Name="noteInfo" Type="String" Label="${noteInfo}"/>
            <Parameter Name="isSimplifiedForm" Type="Boolean" Label="${isSimplifiedForm}"/>
            <Parameter Name="email" Type="String" Label="${email}"/>
            <ReturnType Type="SupplierParty"/>
        </Action>
        <!--推送到合规部门的Action-->
        <Action Name="ReturnToCompliance" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.events.SupplierApproveEvents.procurementReturn"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="target" Type="String" IsCollection="false"/>
            <Parameter Name="noteInfo" Type="String" Label="${noteInfo}"/>
            <ReturnType Type="SupplierParty"/>
        </Action>

        <Action Name="ChangeSupplierStatusToEnable" IsBound="true" EntitySetPath="supplierParty"
                OfbizService="com.banfftech.bfdemo.events.ShipmentEvents.changeSupplierStatusToEnable"
                StickySession="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <Parameter Name="target" Type="String" IsCollection="false"/>
            <ReturnType Type="SupplierParty"/>
        </Action>
        <!--生成调查问卷的回答-->
        <Action Name="GenerateSurveyQuestionAnswer" IsBound="true" OfbizService="com.banfftech.events.SupplierEvents.generateSurveyQuestionAnswer" SideEffects="true">
            <Parameter Name="supplierParty" Type="SupplierParty" Nullable="false" IsCollection="false"/>
            <ReturnType Type="SupplierParty"/>
        </Action>
    </EntityType>

    <EntityType Name="CoWorkHistory" Properties="workEffortId,partyId,approvePartyId,currentStatusId,lastModifiedDate" OfbizEntity="WorkEffortAndPartyGroupContact" OfbizType="PartyRole/roleTypeId=SUPPLIER">
        <LineItem Qualifier="HistoryRecord">
            <DataField Values="workEffortId,approvePartyId,currentStatusId,lastModifiedDate" Importance="High"/>
        </LineItem>
    </EntityType>
    
    <EntityType Name="SurveyQuestionAppl" AutoProperties="true" EntitySetName="SurveyQuestionAppls" AutoSet="true">
        <LineItem Qualifier="SurveyQuestionApplLineItem">
            <DataField Values="surveyQuestionId,SurveyQuestion/question,SurveyQuestionAnswer/booleanResponse,SurveyQuestionAnswer/textResponse" Importance="High"/>
        </LineItem>
        
        <NavigationProperty Name="SurveyQuestion"/>
        <NavigationProperty Name="Survey"/>
        <NavigationProperty Name="SurveyQuestionAnswer" Type="SurveyQuestionAnswer" Relations="SurveyQuestion/SurveyQuestionAnswer" IsCollection="false"/>
    </EntityType>

    <EntityType Name="SurveyQuestion" AutoSet="true" EntitySetName="SurveyQuestions" AutoProperties="true">
    </EntityType>

    <EntityType Name="Survey" AutoSet="true" EntitySetName="Surveys" AutoProperties="true">
    </EntityType>

    <EntityType Name="SurveyQuestionAnswer" AutoSet="true" EntitySetName="SurveyQuestionAnswers" AutoProperties="true">
    </EntityType>

    <EntityType Name="PurchaseQuote" OfbizEntity="Quote" EntityCondition="quoteTypeId=PURCHASE_QUOTE" EntitySetName="PurchaseQuotes" AutoProperties="true" AutoSet="true"
                Handler="component://officeauto/groovyScripts/marketingSalesService/quote/generateEntityListFields.groovy">
        <LineItem>
            <DataField Values="quoteId,quoteName,partyId,custRequestId,salesChannelEnumId" Importance="High"/>
            <DataField Values="statusId" Criticality="statusColor" Importance="High"/>
            <Criticality Value="statusColor"/>
        </LineItem>

        <HeaderInfo TypeName="报价" TypeNamePlural="报价列表">
            <Title Path="quoteId"/>
            <Description Path="quoteName"/>
        </HeaderInfo>

        <FieldGroup Label="BaseInfo" Qualifier="BaseInfo">
            <DataField Values="partyId,salesChannelEnumId,custRequestId" Importance="High"/>
        </FieldGroup>

        <Property Name="partyId" ExcludeFromNavigationContext="true"/>

        <SelectionFields PropertyPath="quoteId,partyId,statusId"/>

        <Property Name="salesChannelEnumId">
            <Text Path="SalesChannelEnumeration/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="statusId">
            <Text Path="QuoteStatusItem/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="partyId">
            <Text Path="SupplierParty/partyName" TextArrangement="TextOnly"/>
            <ValueList CollectionPath="SupplierParties"/>
        </Property>
        <Property Name="statusColor"  Type="numeric" Hidden="true" HiddenFilter="true"/>

        <NavigationProperty Name="QuoteStatusItem" Type="QuoteStatusItem" Relations="StatusItem"/>
        <NavigationProperty Name="SalesChannelEnumeration"/>
        <NavigationProperty Name="SupplierParty" Type="SupplierParty" Relations="PartyGroupAndContact"/>
    </EntityType>

    <EntityType Name="PartyClassification" AutoSet="true" AutoProperties="true" EntitySetName="PartyClassIdentifications"
                Handler="component://officeauto/groovyScripts/partyManage/partyClassification/statusControl.groovy">
        <FieldGroup Qualifier="PartyClassificationFieldGroup" Label="PartyClassificationFieldGroup">
            <DataField Values="PartyClassificationGroup/description" Importance="High"/>
        </FieldGroup>
        <NavigationProperty Name="PartyClassificationGroup"/>
        <Property Name="statusColor" Type="numeric" Hidden="true" HiddenFilter="true"/>
        <Action Name="FillPartyClassification" IsBound="true" OfbizService="com.banfftech.events.SupplierEvents.fillPartyClassification">
            <Parameter Name="partyClassification" Type="PartyClassification" Nullable="false" IsCollection="false"/>
            <Parameter Name="partyClassificationGroupId" Type="String" Label="评级">
                <ValueList CollectionPath="PartyClassificationGroups" WithFixedValues="true">
                    <ParameterInOut LocalDataProperty="partyClassificationGroupId" ValueListProperty="partyClassificationGroupId"/>
                </ValueList>
            </Parameter>
            <ReturnType Type="PartyClassification"/>
        </Action>
    </EntityType>

    <EntityType Name="PartyClassificationGroup" AutoSet="true" AutoProperties="true" EntitySetName="PartyClassificationGroups">
        <NavigationProperty Name="PartyClassificationType"/>
        <NavigationProperty Name="ClassificationEnumeration" Type="ClassificationEnumeration" Relations="Enumeration"/>
        <Property Name="partyClassificationTypeId">
            <Text Path="PartyClassificationType/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="partyClassificationGroupId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="AfterSalesService" OfbizEntity="WorkEffort" EntityCondition="workEffortTypeId=AFTER_SALES" AutoProperties="true" EntitySetName="AfterSalesServices">
        <LineItem Qualifier="AfterSalesServiceLine">
            <DataField Values="workEffortId,workEffortName,actualCompletionDate,fixedAssetId,description" Importance="High"/>
        </LineItem>
        <NavigationProperty Name="FixedAsset"/>
        <Property Name="fixedAssetId">
            <Text Path="FixedAsset/fixedAssetName" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="FixedAsset" EntitySetName="FixedAssets" AutoProperties="true" AutoSet="true"/>

    <EntityType Name="PartyClassificationType" EntityCondition="partyClassificationTypeId in (VALUE_RATING,RISQUE_RATING)" AutoSet="true" AutoProperties="true" EntitySetName="PartyClassificationTypes">
        <Property Name="partyClassificationTypeId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="Invoice" EntitySetName="Invoices" AutoSet="true" AutoProperties="true"
                Handler="component://officeauto/groovyScripts/invoiceManage/invoiceHeader/generateEntityListFields.groovy">
        <Property Name="statusColor"  Type="numeric" Hidden="true" HiddenFilter="true"/>
        <Property Name="invoiceTypeId">
            <Text Path="InvoiceType/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="statusId">
            <Text Path="InvoiceStatusItem/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="partyIdFrom">
            <Text Path="FromParty/partyName" TextArrangement="TextOnly"/>
        </Property>
        <LineItem>
            <DataField Values="invoiceId" Importance="High"/>
            <DataField Values="statusId" Criticality="statusColor" Importance="High"/>
            <DataField Values="partyIdFrom,invoiceDate,description,orderId" Importance="High"/>
            <Criticality Value="statusColor"/>
        </LineItem>
        <NavigationProperty Name="InvoiceType" AutoBinding="true"/>
        <NavigationProperty Name="InvoiceStatusItem" Type="InvoiceStatusItem" Relations="StatusItem" AutoBinding="true"  />
        <NavigationProperty Name="Party" AutoBinding="true" />
        <NavigationProperty Name="FromParty" AutoBinding="true"/>
    </EntityType>

    <EntityType Name="InvoiceType" AutoProperties="true" AutoSet="true" EntitySetName="InvoiceTypes"/>

    <EntityType Name="NoteData" EntitySetName="NoteData" DraftEntityName="PartyNoteDataAppDraft" AutoSet="true" AutoProperties="true">
        <Property Name="noteParty">
            <Text Path="NoteParty/partyName" TextArrangement="TextOnly"/>
        </Property>
        <LineItem Qualifier="NoteDataLineItem">
            <DataField Values="noteId,noteName,noteInfo,noteParty,noteDateTime" Importance="High"/>
            <DataFieldForAction Label="${create}" Action="CreateNoteData" Importance="High" Criticality="Positive" Inline="false" InvocationGrouping="Isolated"/>
        </LineItem>
        <Action Name="CreateNoteData" IsBound="true" OfbizService="com.banfftech.events.SupplierEvents.createNoteData" SideEffects="true">
            <Parameter Name="noteData" Type="NoteData" Nullable="false" IsCollection="true"/>
            <Parameter Name="noteName" Type="String" Label="${noteName}" Nullable="false"/>
            <Parameter Name="noteInfo" Type="String" Label="${noteInfo}" Nullable="false"/>
            <ReturnType Type="NoteData"/>
        </Action>
        <NavigationProperty Name="NoteParty" Relations="NoteParty" Type="Party"/>
    </EntityType>

    <EntityType Name="PurchaseAgreement" DraftEntityName="PurchaseAgreementPartyAppDraft" EntitySetName="PurchaseAgreements" AutoSet="true" EntityCondition="agreementTypeId=PURCHASE_AGREEMENT" AutoProperties="true" OfbizEntity="Agreement">
        <LineItem Qualifier="PurchaseAgreementLineItem">
            <DataField Values="agreementId,productId,description,agreementDate,fromDate,thruDate" Importance="High"/>
        </LineItem>

        <SelectionFields PropertyPath="productId,partyIdFrom,partyIdTo"/>

        <HeaderInfo TypeName="合同">
            <Title Path="agreementId"/>
            <Description Path="description"/>
        </HeaderInfo>

        <FieldGroup Qualifier="BaseInfo" Label="BaseInfo">
            <DataField Values="productId,partyIdFrom" Importance="High"/>
        </FieldGroup>

        <FieldGroup Qualifier="AgreementTime" Label="AgreementTime">
            <DataField Values="agreementDate,fromDate,thruDate" Importance="High"/>
        </FieldGroup>

        <Property Name="partyIdFrom">
            <Text Path="Company/partyName" TextArrangement="TextOnly"/>
            <ValueList CollectionPath="Companies" ParameterDisplayOnly="PartyAndContact/primaryPhone"/>
        </Property>

        <Property Name="partyIdTo">
            <Text Path="Supplier/partyName" TextArrangement="TextOnly"/>
            <ValueList CollectionPath="Suppliers" ParameterDisplayOnly="PartyAndContact/primaryPhone"/>
        </Property>

        <Property Name="productId">
            <Text Path="Product/productName" TextArrangement="TextOnly"/>
        </Property>

        <NavigationProperty Name="Product"/>
        <NavigationProperty Name="SupplierParty" Type="SupplierParty" Relations="ToPartyGroupAndContact"/>
        <NavigationProperty Name="Company" Type="Company" Relations="FromPartyGroupAndContact"/>
        <NavigationProperty Name="AgreementTerm"/>
    </EntityType>

    <EntityType Name="PurchaseOrder" OfbizEntity="OrderHeader" EntityCondition="orderTypeId=PURCHASE_ORDER" AutoProperties="true" AutoSet="true" EntitySetName="PurchaseOrders"
                Handler="component://officeauto/groovyScripts/purchaseOrderMange/OrderHeader/generateEntityListFields.groovy">
        <NavigationProperty Name="OrderStatusItem" Type="OrderStatusItem" Relations="StatusItem"/>
        <NavigationProperty Name="SalesChannelEnumeration"/>

        <Property Name="orderHeaderStatus" Type="Edm.Int64"/>
        <Property Name="amountPaid" Type="BigDecimal" Scale="3" />
        <Property Name="receivedQuantity" Type="BigDecimal" Scale="2"/>
        <Property Name="targetQuantity" Type="BigDecimal" Scale="2"/>
        <Property Name="donutChartCriticalValue" Type="Edm.Int64"/>
        <Property Name="statusId">
            <Text Path="OrderStatusItem/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="salesChannelEnumId">
            <Text Path="SalesChannelEnumeration/description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="AgreementTerm" EntitySetName="AgreementTerms" AutoSet="true" AutoProperties="true">
        <LineItem Qualifier="AgreementTermLineItem">
            <DataField Values="agreementTermId,agreementItemSeqId,termTypeId,termValue,termDays,maxQuantity,minQuantity,description,fromDate,thruDate" Importance="High"/>
        </LineItem>

        <Property Name="termTypeId">
            <Text Path="TermType/description" TextArrangement="TextOnly"/>
        </Property>

        <NavigationProperty Name="TermType"/>
    </EntityType>

    <EntityType Name="TermType" AutoProperties="true" AutoSet="true" EntitySetName="TermTypes">
        <Property Name="termTypeId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="Company" OfbizEntity="PartyGroupAndContact" AutoProperties="true" EntityCondition="PartyRole/roleTypeId=INTERNAL_ORGANIZATIO" EntitySetName="Companies" AutoSet="true">
        <Property Name="partyId">
            <Text Path="partyName" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="CustomerParty" OfbizEntity="PartyGroupAndContact" AutoSet="true" EntitySetName="CustomerParties" EntityCondition="PartyRole/roleTypeId=CUSTOMER" DraftEntityName="PartyCustomerPartyDraft"
                Properties="partyId,partyName,description,createdDate,createdByUserLogin">
        <Property Name="partyId">
            <Text Path="partyName" TextArrangement="TextOnly"/>
        </Property>

        <Property Name="criticalityValue" Type="numeric" Hidden="true" HiddenFilter="true"/>
        <Property Name="usccNumber" Type="String" HiddenFilter="true"/>
        <NavigationProperty Name="ToShipment"/>
        <NavigationProperty Name="FromShipment"/>
        <NavigationProperty Name="OwnerFinAccount" Type="FinAccount" IsCollection="true"
                            Relations="OwnerFinAccount(finAccountTypeId=BANK_ACCOUNT)" />
    </EntityType>

    <EntityType Name="PersonAndContact" AttrEntityName="PartyAttribute" AutoProperties="true" AutoLabel="true"
                AutoSet="true" EntitySetName="PersonAndContacts">
        <Property Name="position" IsAttribute="true" Type="String"/>
        <LineItem Qualifier="PartyRelationshipLineItem">
            <DataField Values="partyName,primaryPhone,phoneMobile,primaryEmail,position" Importance="High"/>
            <DataFieldForAction Label="${create}" Action="CreatePersonAndContact" Importance="High" Criticality="Positive" Inline="false" InvocationGrouping="Isolated"/>
        </LineItem>
        <Action Name="CreatePersonAndContact" IsBound="true" OfbizService="com.banfftech.events.SupplierEvents.createPersonAndContact">
            <Parameter Name="personAndContact" Type="PersonAndContact" Nullable="false" IsCollection="true"/>
            <Parameter Name="partyName" Type="String" Label="${partyName}" Nullable="false"/>
            <Parameter Name="primaryPhone" Type="String" Label="${phone}" Nullable="true"/>
            <Parameter Name="phoneMobile" Type="String" Label="${mobile}" Nullable="false"/>
            <Parameter Name="primaryEmail" Type="String" Label="${email}" Nullable="true"/>
            <Parameter Name="position" Type="String" Label="${position}" Nullable="true"/>
            <ReturnType Type="PersonAndContact"/>
        </Action>

    </EntityType>

    <EntityType Name="SupplierProduct" AutoSet="true" EntitySetName="SupplierProducts" AutoProperties="true" DraftEntityName="PartySupplierProductDraft" >
        <Property Name="minimumOrderQuantity" DefaultValue="1" Computed="true"/>
        <Property Name="currencyUomId" DefaultValue="CNY" Computed="true"/>
        <Property Name="partyId" Computed="true"/>
        <Property Name="availableFromDate" Computed="true"/>
        <NavigationProperty Name="Product"/>
        <NavigationProperty Name="CurrencyUom"/>
        <NavigationProperty Name="Uom" Relations="Product/QuantityUom" Type="Uom" AutoBinding="true"/>
        <LineItem Qualifier="SupplierProductLineItem">
            <DataField Values="productId,Product/productName,Product/quantityUomId" Importance="High" />
            <DataFieldForAction Label="${create}" Action="CreateSupplierProduct" Importance="High" Criticality="Positive" Inline="false" InvocationGrouping="Isolated"/>
        </LineItem>
        <Action Name="CreateSupplierProduct" IsBound="true" OfbizService="com.banfftech.events.SupplierEvents.createSupplierProduct" SideEffects="true">
            <Parameter Name="supplierProduct" Type="SupplierProduct" Nullable="false" IsCollection="true"/>
            <Parameter Name="productId" Type="String" Label="${productId}" Nullable="false"/>
            <ReturnType Type="SupplierProduct"/>
        </Action>
    </EntityType>
    <EntityType Name="Product" EntitySetName="Products" AutoSet="true" AutoProperties="true" OfbizType="productTypeId=FINISHED_GOOD">
        <Property Name="productTypeId" >
            <Text Path="ProductType/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="quantityUomId" Immutable="true">
            <Text Path="QuantityUom/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="productName" Immutable="true"/>
        <NavigationProperty Name="ProductType"/>
        <NavigationProperty Name="QuantityUom"/>
    </EntityType>
    <EntityType Name="RawMaterialProduct" EntitySetName="RawMaterialProducts" AutoSet="true" OfbizEntity="Product"
                EntityCondition="productTypeId=RAW_MATERIAL" AutoProperties="true">
        <Property Name="productId" Label="产品ID">
            <Text Path="productName" TextArrangement="TextOnly"/>
        </Property>
        <NavigationProperty Name="QuantityUom" AutoBinding="true"/>
    </EntityType>
    <EntityType Name="ProductType" AutoSet="true" EntitySetName="ProductTypes" AutoProperties="true"/>
    <EntityType Name="Uom" AutoProperties="true" AutoSet="true" EntitySetName="Uoms">
        <Property Name="description" Label="数量单位"/>
    </EntityType>
    <EntityType Name="Shipment" AutoProperties="true" AutoSet="true" EntitySetName="Shipments" AttrEntityName="ShipmentAttribute"  DraftEntityName="PartyShipmentAppDraft"
                Handler="component://officeauto/groovyScripts/partyManage/shipment/statusControl.groovy">
        <Property Name="receiveDate" Type="Timestamp" Precision="3" IsAttribute="true"/>
        <Property Name="statusId">
            <Text Path="ShipmentStatusItem/description" TextArrangement="TextOnly"/>
        </Property>
        <Property Name="shipmentStatus" Type="Edm.Int64"/>
        <Property Name="currencyUomId">
            <Text Path="CurrencyUom/description" TextArrangement="TextOnly"/>
        </Property>

        <LineItem Qualifier="ShipmentLineItem">
            <DataField Values="shipmentId,ShipmentItem/productId,ShipmentRouteSegment/carrierPartyId,primaryOrderId,estimatedShipDate,ShipmentRouteSegment/actualArrivalDate,SupplierParty/address1,CustomerParty/address1" Importance="High"/>
            <DataField Importance="High" Values="statusId" Criticality="shipmentStatus"/>
            <Criticality Value="shipmentStatus"/>
        </LineItem>
        <NavigationProperty Name="ShipmentItem"/>
        <NavigationProperty Name="SupplierParty" Relations="FromPartyGroupAndContact" Type="SupplierParty" ReadOnly="true" IsCollection="false"/>
        <NavigationProperty Name="CustomerParty" Relations="ToPartyGroupAndContact" Type="CustomerParty" ReadOnly="true" IsCollection="false"/>
        <NavigationProperty Name="ShipmentStatusItem" Type="ShipmentStatusItem" Relations="StatusItem"/>
        <NavigationProperty Name="CurrencyUom" AutoBinding="true"/>
        <NavigationProperty Name="ShipmentRouteSegment" AutoBinding="true"/>

    </EntityType>
    <EntityType Name="ShipmentItem" AutoProperties="true" AutoSet="true" EntitySetName="ShipmentItems">
        <Property Name="productId">
            <Text Path="Product/productName" TextArrangement="TextOnly"/>
        </Property>
        <NavigationProperty Name="Product"/>
    </EntityType>
    <EntityType Name="ShipmentRouteSegment" AutoProperties="true" AutoSet="true" EntitySetName="ShipmentRouteSegments">
        <Property Name="carrierPartyId">
            <Text Path="CarrierParty/partyName" TextArrangement="TextOnly"/>
        </Property>
        <NavigationProperty Name="CarrierParty" AutoBinding="true" IsCollection="false"/>
    </EntityType>
    <EntityType Name="SupplierStatusItem" AutoSet="true" EntitySetName="SupplierStatusItems" AutoProperties="true">
        <Property Name="statusId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>
    <EntityType Name="ShipmentStatusItem" AutoSet="true" EntitySetName="ShipmentStatusItems" AutoProperties="true">
        <Property Name="statusId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>
    <EntityType Name="AccountStatusItem" AutoSet="true" EntitySetName="AccountStatusItems" AutoProperties="true">
        <Property Name="statusId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>
    <EntityType Name="OrderStatusItem" AutoSet="true" EntitySetName="OrderStatusItems" AutoProperties="true">
        <Property Name="statusId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>
    <EntityType Name="InvoiceStatusItem" AutoSet="true" EntitySetName="InvoiceStatusItems" AutoProperties="true">
        <Property Name="statusId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>
    <EntityType Name="QuoteStatusItem" AutoSet="true" EntitySetName="QuoteStatusItems" AutoProperties="true">
        <Property Name="statusId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="FinAccount" AutoSet="true" EntitySetName="FinAccounts" AutoProperties="true" AttrEntityName="FinAccountAttribute" DraftEntityName="FinAccountAppDraft" >
        <Property Name="accountName" IsAttribute="true" Type="String"/>
        <Property Name="currencyUomId" >
            <Text Path="CurrencyUom/description" TextArrangement="TextOnly" />
            <ValueList CollectionPath="CurrencyUoms" WithFixedValues="true" />
        </Property>
        <Property Name="finAccountTypeId">
            <Text Path="FinAccountType/description" TextArrangement="TextLast" />
            <ValueList CollectionPath="FinAccountTypes" WithFixedValues="true" />
        </Property>
        <Property Name="statusId">
            <Text Path="StatusItem/description" TextArrangement="TextOnly" />
            <ValueList CollectionPath="FinacctStatusItems" WithFixedValues="true" />
        </Property>
        <Property Name="ownerPartyId">
            <Text Path="OwnerParty/partyName" TextArrangement="TextOnly"/>
        </Property>

<!--        <LineItem Qualifier="FinAccountLineItem">-->
<!--            <DataField Values="finAccountName,finAccountCode,currencyUomId,statusId" Importance="High"/>-->
<!--        </LineItem>-->
        <Action Name="CreateFinAccount" IsBound="true" OfbizService="com.banfftech.events.SupplierEvents.createFinAccount" SideEffects="true">
            <Parameter Name="finAccount" Type="FinAccount" Nullable="false" IsCollection="true"/>
            <Parameter Name="finAccountName" Type="String" Label="${finAccountName}" Nullable="false"/>
            <Parameter Name="finAccountCode" Type="String" Label="${finAccountCode}" Nullable="false"/>
            <ReturnType Type="NoteData"/>
        </Action>
        <NavigationProperty Name="AccountStatusItem" Type="AccountStatusItem" Relations="StatusItem" AutoBinding="true" />
        <NavigationProperty Name="FinAccountType" AutoBinding="true" />
        <NavigationProperty Name="CurrencyUom" AutoBinding="true" />
        <NavigationProperty Name="OwnerParty"/>
    </EntityType>

    <EntityType Name="FinAccountType" EntitySetName="FinAccountTypes" AutoSet="true" AutoProperties="true" />
    <EntityType Name="Party" EntitySetName="Parties" AutoSet="true" AutoProperties="true">
    </EntityType>

    <EntityType Name="Uom" AutoProperties="true" AutoSet="true" EntitySetName="Unm" >
        <Property Name="uomId">
            <Text Path="description" TextArrangement="TextLast" />
        </Property>

        <Property Name="uomTypeId" >
            <Text Path="UomType/description" TextArrangement="TextOnly" />
            <ValueList CollectionPath="UomTypes" WithFixedValues="true" />
        </Property>

        <NavigationProperty Name="UomType" AutoBinding="true" />
    </EntityType>

    <EntityType Name="UomType" AutoSet="true" EntitySetName="UomTypes" AutoProperties="true" >
        <Property Name="uomTypeId" >
            <Text Path="description" TextArrangement="TextOnly" />
        </Property>
    </EntityType>

    <EntityType Name="Enumeration" EntitySetName="OrderSalesEnumerations" EntityCondition="enumTypeId=ORDER_NEW_SALES_CHANNEL" AutoProperties="true">
        <ValueList CollectionPath="OrderSalesEnumerations" WithFixedValues="true" Label="选择销售渠道"/>
        <Property Name="enumId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

    <EntityType Name="ClassificationEnumeration" OfbizEntity="Enumeration" EntitySetName="ClassificationEnumerations" EntityCondition="enumTypeId=CLASSIFICATION_TYPE" AutoProperties="true">
        <Property Name="enumId">
            <Text Path="description" TextArrangement="TextOnly"/>
        </Property>
    </EntityType>

</ofbiz-edm>
